<!DOCTYPE html>
<html lang="sw">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TZ LEAKS - Video za Siri, Udaku na Skendo Mpya</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Anton&family=Oswald:wght@400;700&family=Roboto:wght@400;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
    <style>
        :root {
            --brand-red: #cc0000;
            --brand-yellow: #ffcc00;
            --brand-black: #111111;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f3f4f6;
            color: #111;
        }

        /* Vibe la Kichwa cha Habari (Tabloid Headlines) */
        .headline-font {
            font-family: 'Oswald', sans-serif;
            text-transform: uppercase;
            line-height: 1.1;
        }

        .logo-font {
            font-family: 'Anton', sans-serif;
            letter-spacing: -1px;
        }

        /* Breaking News Ticker Animation */
        .ticker-wrap {
            width: 100%;
            overflow: hidden;
            background-color: var(--brand-black);
            color: white;
            padding: 8px 0;
            white-space: nowrap;
        }

        .ticker-move {
            display: inline-block;
            animation: ticker 20s linear infinite;
        }

        @keyframes ticker {
            0% {
                transform: translate3d(100%, 0, 0);
            }

            100% {
                transform: translate3d(-100%, 0, 0);
            }
        }

        /* Video Card Styles - Kadi za Udaku */
        .gossip-card {
            background: white;
            border: 1px solid #e5e7eb;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
        }

        .gossip-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            border-color: var(--brand-red);
        }

        .exclusive-badge {
            background: var(--brand-red);
            color: white;
            font-family: 'Oswald', sans-serif;
            font-weight: bold;
            text-transform: uppercase;
            padding: 2px 8px;
            font-size: 0.8rem;
            position: absolute;
            top: 10px;
            left: -5px;
            box-shadow: 2px 2px 0px rgba(0, 0, 0, 0.5);
            z-index: 10;
        }

        .censored-overlay {
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
        }

        /* Modal Styles - Onyo Kali */
        .warning-stripes {
            background: repeating-linear-gradient(45deg,
                    #fbbf24,
                    #fbbf24 10px,
                    #000 10px,
                    #000 20px);
            height: 15px;
            width: 100%;
        }

        .modal-input:focus {
            border-color: var(--brand-red);
            ring: 2px solid var(--brand-red);
        }
    </style>
</head>

<body class="bg-gray-100">

    <!-- Navbar yenye Logo Kubwa -->
    <header class="bg-red-700 text-white sticky top-0 z-40 shadow-lg border-b-4 border-black">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex flex-col leading-none">
                <span class="text-xs font-bold text-yellow-300 tracking-widest uppercase">The No.1 Gossip Site</span>
                <h1 class="text-4xl md:text-5xl logo-font italic tracking-tighter">
                    TZ <span class="bg-black px-2 text-white transform -skew-x-12 inline-block">LEAKS</span>
                </h1>
            </div>

            <button
                class="open-modal-trigger hidden sm:block bg-yellow-400 hover:bg-yellow-500 text-black font-black text-xl px-6 py-2 uppercase transform -skew-x-12 border-2 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] active:translate-x-[2px] active:translate-y-[2px] active:shadow-none transition-all">
                Jiunge VIP
            </button>
        </div>
    </header>

    <!-- Breaking News Ticker -->
    <div class="ticker-wrap border-b border-gray-800 relative z-30">
        <div class="ticker-move headline-font text-lg tracking-wide">
            <span class="text-red-500 font-bold mr-2">BREAKING:</span> VIDEO YA MKE WA MTU YAVUJA MTANDAONI... <span
                class="mx-4 text-gray-500">|</span>
            <span class="text-red-500 font-bold mr-2">EXCLUSIVE:</span> MWANAFUNZI WA CHUO ANASWA GESTI... <span
                class="mx-4 text-gray-500">|</span>
            <span class="text-red-500 font-bold mr-2">TRENDING:</span> TAZAMA VIDEO ZOTE BILA KIKOMO HAPA...
        </div>
    </div>

    <main class="container mx-auto px-2 py-6 max-w-6xl">

        <!-- Top Alert Box -->
        <div class="bg-black text-white p-4 mb-8 text-center border-l-8 border-red-600 shadow-md">
            <h2 class="text-2xl headline-font text-yellow-400 mb-1">⚠️ ONYO KALI: MAUDHUI YA WATU WAZIMA (18+)</h2>
            <p class="text-gray-300 text-sm">Video hizi zinaonesha matukio halisi yasiyohaririwa. Tafadhali hakikisha
                una umri wa miaka 18 na kuendelea.</p>
        </div>

        <!-- Video Container -->
        <div id="video-list-container" class="space-y-10">
            <!-- Sections zitajazwa hapa na JS -->
            <div class="animate-pulse flex flex-col items-center justify-center py-20">
                <div class="h-10 w-10 bg-red-600 rounded-full animate-bounce"></div>
                <p class="mt-4 font-bold headline-font text-xl">INAPAKIA UDAKU...</p>
            </div>
        </div>

        <!-- Pagination (Fake) -->
        <div class="flex justify-center mt-12 space-x-2 font-bold headline-font">
            <span class="px-4 py-2 bg-red-600 text-white border border-black cursor-pointer">1</span>
            <span
                class="px-4 py-2 bg-white text-black border border-black hover:bg-gray-200 cursor-not-allowed">2</span>
            <span
                class="px-4 py-2 bg-white text-black border border-black hover:bg-gray-200 cursor-not-allowed">3</span>
            <span class="px-4 py-2 bg-white text-black border border-black hover:bg-gray-200 cursor-not-allowed">NEXT
                &raquo;</span>
        </div>

        <!-- Bottom CTA -->
        <div class="mt-12 bg-yellow-400 p-6 text-center border-4 border-black transform rotate-1">
            <h3 class="headline-font text-3xl md:text-5xl uppercase font-bold mb-2">USIPITWE NA UHONDO!</h3>
            <p class="font-bold mb-4">Jiunge na Group letu la WhatsApp la VIP uone kila kitu.</p>
            <button
                class="open-modal-trigger bg-black text-white font-black text-xl px-8 py-3 uppercase hover:bg-red-600 transition-colors">
                BOFYA HAPA KUJIUNGA
            </button>
        </div>

    </main>

    <footer class="bg-black text-white py-10 mt-10 border-t-8 border-red-600">
        <div class="container mx-auto text-center">
            <h2 class="headline-font text-3xl text-gray-400 mb-4">TZ LEAKS</h2>
            <p class="text-gray-600 text-sm">&copy; 2025 TZ Leaks Media. Habari za Uhakika, Udaku na Matukio.</p>
            <div class="mt-4 text-xs text-gray-700">
                <a href="#" class="hover:text-red-500 mx-2">Vigezo</a> |
                <a href="#" class="hover:text-red-500 mx-2">Faragha</a> |
                <a href="#" class="hover:text-red-500 mx-2">Ripoti</a>
            </div>
        </div>
    </footer>

    <!-- MODAL YA MALIPO (THE GATE) -->
    <div id="payment-modal"
        class="fixed inset-0 bg-black/90 backdrop-blur-md flex items-center justify-center p-4 z-50 hidden">
        <div id="payment-box"
            class="bg-white w-full max-w-md overflow-hidden relative shadow-2xl border-4 border-red-600">
            <!-- Close Button -->
            <button id="close-modal" class="absolute top-2 right-2 bg-gray-200 hover:bg-gray-300 rounded-full p-2 z-20">
                <i class="fas fa-times text-xl"></i>
            </button>

            <!-- Warning Stripes Top -->
            <div class="warning-stripes"></div>

            <div class="p-6 md:p-8">
                <!-- Form View -->
                <div id="form-view">
                    <div class="text-center mb-6">
                        <div class="inline-block border-4 border-red-600 p-2 mb-2 rounded-full">
                            <i class="fas fa-lock text-3xl text-red-600"></i>
                        </div>
                        <h2
                            class="headline-font text-3xl md:text-4xl font-bold text-red-700 uppercase leading-none mt-2">
                            MAUDHUI YAMEFUNGIWA
                        </h2>
                        <p
                            class="font-bold text-gray-800 mt-2 bg-yellow-200 p-2 inline-block transform -rotate-1 shadow-sm">
                            VIDEO HII INA MAMBO YA SIRI
                        </p>
                        <p class="text-sm text-gray-600 mt-4 leading-relaxed">
                            Video hii imefichwa kwa sababu inaonyesha <span class="font-bold text-black">tukio
                                zito</span>.
                            Lipa kiingilio kidogo cha <span class="bg-black text-white px-1 font-bold">TSH 1,000</span>
                            ili uone video zote bila kikomo.
                        </p>
                    </div>

                    <form id="payment-form" class="space-y-4">
                        <div class="relative">
                            <label for="phone" class="block text-xs font-bold uppercase text-gray-500 mb-1">Weka Namba
                                ya Malipo (M-Pesa/Tigo/Airtel)</label>
                            <input type="tel" id="phone" name="phone"
                                class="w-full bg-gray-100 border-2 border-gray-300 p-4 text-xl font-bold text-center tracking-widest focus:outline-none focus:border-red-600 focus:bg-white transition-colors modal-input"
                                placeholder="07XXXXXXXX" required pattern="0[6-7][0-9]{8}">
                            <i class="fas fa-mobile-alt absolute right-4 top-9 text-gray-400"></i>
                        </div>

                        <button type="submit"
                            class="w-full bg-red-600 hover:bg-red-700 text-white font-black text-xl py-4 uppercase shadow-lg transform active:scale-95 transition-transform flex items-center justify-center gap-2">
                            <i class="fas fa-unlock"></i> FUNGUA VIDEO SASA
                        </button>
                    </form>

                    <div class="mt-6 flex justify-center items-center">
                        <img src="/zenopay-logo.png" class="h-10 object-contain"
                            alt="Payment Methods - Tigo Pesa, Vodacom, Airtel Money, Halopesa">
                    </div>
                </div>

                <!-- Loading View -->
                <div id="waiting-view" class="hidden text-center py-8">
                    <div class="animate-spin rounded-full h-20 w-20 border-b-4 border-r-4 border-red-600 mx-auto mb-6">
                    </div>
                    <h3 class="headline-font text-3xl font-bold text-gray-900 mb-2">USIFUNGE UKURASA HUU!</h3>
                    <p class="text-lg text-gray-700 font-medium">Ombi la malipo limetumwa kwenye simu yako.</p>
                    <div class="bg-yellow-100 border-l-4 border-yellow-500 p-4 mt-6 text-left mx-auto max-w-xs">
                        <p class="font-bold text-sm text-yellow-800">HATUA:</p>
                        <ol class="list-decimal list-inside text-sm text-yellow-800 mt-1">
                            <li>Angalia simu yako sasa</li>
                            <li>Weka namba ya siri (PIN)</li>
                            <li>Subiri hapa tukuthibitishie</li>
                        </ol>
                    </div>
                    <p class="text-xs text-gray-400 mt-8 animate-pulse">Inasubiri malipo...</p>
                </div>
            </div>

            <!-- Warning Stripes Bottom -->
            <div class="warning-stripes"></div>
        </div>
    </div>

    <script>
        // === DATA STRUCTURE (ORIGINAL) ===
        const newLinks = [
            "https://www.empressleak.xyz/media/videos/tmb/7072/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/6995/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/6892/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/6777/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/6726/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/6673/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/7167/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/7047/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/7099/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/7097/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/7071/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/7042/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/6991/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/6992/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/6920/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/6904/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/6892/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/6862/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/6777/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/6757/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/6745/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/6726/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/6699/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/6680/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/6671/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/6670/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/6653/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/6651/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/6598/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/6428/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/6254/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/6214/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/6213/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/6203/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/5921/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/5863/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/5861/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/5792/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/5733/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/5622/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/5590/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/5575/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/5504/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/5492/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/5476/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/5449/video.webm",
            "https://www.empressleak.xyz/media/videos/tmb/5431/video.webm"
        ];

        let linkIndex = 0;

        // Categories (Titles unchanged for compatibility)
        const categories = {
            "HABARI KUBWA ZILIZOVUJA LEO": [
                { title: "IMEVUJA: Mke wa Mtu Akilia na Mchepuko Gesti", duration: "FULL HD", src: newLinks[linkIndex++] || "#" },
                { title: "SKENDO: Mwanafunzi wa Chuo Adaiwa Kufanywa Chooni", duration: "12 MIN", src: newLinks[linkIndex++] || "#" },
                { title: "Mtoto wa Mchungaji AVULIWA WAZIWAZI Live", duration: "UNCENSORED", src: newLinks[linkIndex++] || "#" },
                { title: "SHOCKING: Bibi Harusi Akifanywa Kabla ya Ndoa", duration: "FULL VIDEO", src: newLinks[linkIndex++] || "#" },
                { title: "LEAKED: Housegirl Mwenye Nguo Fupi Apakwa Mafuta", duration: "NEW", src: newLinks[linkIndex++] || "#" },
                { title: "Shemeji Ananiingilia Jikoni Kimya Kimya (Video)", duration: "VIRAL", src: newLinks[linkIndex++] || "#" },
                { title: "DAKTARI WA KICHAA: Akikojoa Bila Kusimama", duration: "HOT", src: newLinks[linkIndex++] || "#" },
                { title: "Housegirl Amfanyia Mambo Mtoto wa Bosi Wakiwa Peke Yao", duration: "LEAKED", src: newLinks[linkIndex++] || "#" }
            ],
            "VIDEO ZA SIRI ZA CHUMBANI": [
                { title: "VIDEO MPYA UDSM: Mwanafunzi YAVUJA Chumbani", duration: "HOT", src: newLinks[linkIndex++] || "#" },
                { title: "LIVE DALADALA: Ananifunulia Sketi Kwenye Siti", duration: "SPY CAM", src: newLinks[linkIndex++] || "#" },
                { title: "Toto la Sinza Lafundwa na MZEE WA KAZI", duration: "FULL HD", src: newLinks[linkIndex++] || "#" },
                { title: "ASKARI Amwaga LIVE Mbele ya Mtuhumiwa", duration: "LEAKED", src: newLinks[linkIndex++] || "#" },
                { title: "Binti Kiziwi AFUNZWA Kutumia Mboo na Fundi", duration: "NEW", src: newLinks[linkIndex++] || "#" },
                { title: "WEMA SEPETU: Video Yake Ya Siri Chumbani YAVUJA", duration: "EXCLUSIVE", src: newLinks[linkIndex++] || "#" },
                { title: "Mke wa Bosi Anataka Kila Siku (IMENASWA)", duration: "HIDDEN CAM", src: newLinks[linkIndex++] || "#" },
                { title: "MGANGA Amfanyia Mambo Mteja Wake wa Kike", duration: "VIRAL", src: newLinks[linkIndex++] || "#" }
            ],
            "MASTAA WABONGO NA SKENDO": [
                { title: "Mama Ntilie Mwenye MAZIWA MAKUBWA Afanywa Jikoni", duration: "18+", src: newLinks[linkIndex++] || "#" },
                { title: "AJICHUA LIVE CHUMBANI: Ajua Narekodi!", duration: "LEAKED", src: newLinks[linkIndex++] || "#" },
                { title: "Kibibi cha Kisukuma Chatafuna MBOO Ya Mjukuu", duration: "SCANDAL", src: newLinks[linkIndex++] || "#" },
                { title: "KIJANA MDOGO Ampiga Mshua Mkubwa Gesti", duration: "NEW", src: newLinks[linkIndex++] || "#" },
                { title: "TRAFFIC POLISI Anapigwa Chini ya Gari (LEAKED)", duration: "VIRAL", src: newLinks[linkIndex++] || "#" },
                { title: "Dereva wa Lori Aharibu Mke wa Mtu (VIDEO NZIMA)", duration: "FULL", src: newLinks[linkIndex++] || "#" },
                { title: "Shemeji Mpenda Zege Anataka Kila Dakika", duration: "HOT", src: newLinks[linkIndex++] || "#" },
                { title: "KITANDA HAKIZAI: Utamu Mpaka Asubuhi", duration: "18+", src: newLinks[linkIndex++] || "#" }
            ]
        };

        document.addEventListener('DOMContentLoaded', () => {
            const videoListContainer = document.getElementById('video-list-container');
            const paymentModal = document.getElementById('payment-modal');
            const closeModalButton = document.getElementById('close-modal');
            const formView = document.getElementById('form-view');
            const waitingView = document.getElementById('waiting-view');
            const paymentForm = document.getElementById('payment-form');

            // --- Function to create the NEW GOSSIP CARD ---
            const createVideoCard = (video) => {
                const views = Math.floor(Math.random() * 50) + 5 + 'K'; // 5K to 55K views

                // Badges randomizer
                const badges = ["EXCLUSIVE", "IMEVUJA", "MPYA", "LIVE"];
                const randomBadge = badges[Math.floor(Math.random() * badges.length)];

                const card = document.createElement('div');
                card.className = 'gossip-card open-modal-trigger relative group cursor-pointer';

                card.innerHTML = `
                    <div class="relative w-full aspect-video bg-black overflow-hidden">
                        <span class="exclusive-badge">${randomBadge}</span>
                        <video class="w-full h-full object-cover opacity-90 group-hover:opacity-100 transition-opacity" 
                               loop muted playsinline preload="none" data-src="${video.src}"></video>
                        
                        <!-- Play Button Overlay -->
                        <div class="play-overlay absolute inset-0 flex items-center justify-center">
                            <div class="w-14 h-14 bg-red-600/80 rounded-full flex items-center justify-center text-white text-xl border-2 border-white shadow-lg group-hover:scale-110 transition-transform">
                                <i class="fas fa-play ml-1"></i>
                            </div>
                        </div>

                        <!-- Duration Label (Tabloid Style) -->
                        <div class="absolute bottom-2 right-2 bg-black text-yellow-400 text-xs font-black px-2 py-1 uppercase">
                            ${video.duration}
                        </div>
                    </div>
                    
                    <div class="p-3">
                        <div class="flex items-center text-xs text-gray-500 font-bold mb-1 uppercase tracking-tighter">
                            <span class="text-red-600 mr-2"><i class="fas fa-camera"></i> LEAKED</span> 
                            <span>${views} VIEWS</span>
                        </div>
                        <h3 class="headline-font text-xl md:text-2xl font-bold leading-tight hover:text-red-700 transition-colors">
                            ${video.title}
                        </h3>
                        <p class="text-xs text-gray-400 mt-2 font-mono">CHANZO: ANONYMOUS</p>
                    </div>
                `;

                // Logic ya ku-play video on hover (unchanged)
                const videoEl = card.querySelector('video');
                card.addEventListener('mouseenter', () => {
                    if (!videoEl.src && videoEl.dataset.src) {
                        videoEl.src = videoEl.dataset.src;
                        videoEl.load();
                    }
                    videoEl.play().catch(e => { });
                });
                card.addEventListener('mouseleave', () => {
                    videoEl.pause();
                    videoEl.currentTime = 0;
                });

                return card;
            };

            // --- Loop Categories ---
            if (videoListContainer) {
                videoListContainer.innerHTML = '';

                for (const categoryName in categories) {
                    // Section Wrapper
                    const sectionWrapper = document.createElement('div');

                    // Category Title (Tabloid Header)
                    const titleEl = document.createElement('div');
                    titleEl.className = 'flex items-center mb-6 border-b-2 border-black pb-2';
                    titleEl.innerHTML = `
                        <div class="bg-red-600 text-white px-4 py-1 headline-font text-xl md:text-2xl font-bold uppercase transform -skew-x-12 mr-4">
                            ${categoryName}
                        </div>
                        <div class="flex-grow h-1 bg-gray-200"></div>
                    `;
                    sectionWrapper.appendChild(titleEl);

                    // Grid Layout
                    const gridEl = document.createElement('div');
                    gridEl.className = 'grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6';

                    const videos = categories[categoryName];
                    videos.sort(() => 0.5 - Math.random()).forEach(video => {
                        gridEl.appendChild(createVideoCard(video));
                    });

                    sectionWrapper.appendChild(gridEl);
                    videoListContainer.appendChild(sectionWrapper);
                }
            }

            // --- Modal Logic (UNCHANGED FUNCTIONALITY) ---
            const openModal = () => paymentModal.classList.remove('hidden');
            const closeModal = () => {
                paymentModal.classList.add('hidden');
                setTimeout(() => {
                    formView.style.display = 'block';
                    waitingView.style.display = 'none';
                }, 300);
            };

            function attachModalTriggers() {
                document.querySelectorAll('.open-modal-trigger').forEach(trigger => {
                    if (trigger.dataset.modalAttached) return;
                    trigger.dataset.modalAttached = 'true';
                    trigger.addEventListener('click', (e) => {
                        e.preventDefault();

                        // Check if this is a video card (gossip-card)
                        if (trigger.classList.contains('gossip-card')) {
                            const videoEl = trigger.querySelector('video');
                            const playOverlay = trigger.querySelector('.play-overlay');
                            if (videoEl) {
                                // Load and play the video if not already loaded
                                if (!videoEl.src && videoEl.dataset.src) {
                                    videoEl.src = videoEl.dataset.src;
                                    videoEl.load();
                                }

                                // Hide the play button overlay
                                if (playOverlay) {
                                    playOverlay.style.display = 'none';
                                }

                                // Unmute and play the video
                                videoEl.muted = false;
                                videoEl.play().catch(err => console.log('Autoplay blocked:', err));

                                // After 3 seconds, pause video and show payment modal
                                setTimeout(() => {
                                    videoEl.pause();
                                    videoEl.muted = true;
                                    // Show the play button overlay again
                                    if (playOverlay) {
                                        playOverlay.style.display = 'flex';
                                    }
                                    openModal();
                                }, 3000);

                                return; // Don't open modal immediately
                            }
                        }

                        // For non-video triggers (buttons), open modal immediately
                        openModal();
                    });
                });
            }

            attachModalTriggers();
            setTimeout(attachModalTriggers, 1000);

            closeModalButton.addEventListener('click', closeModal);
            paymentModal.addEventListener('click', (event) => {
                if (event.target === paymentModal) {
                    closeModal();
                }
            });

            // Payment Form Submission (BACKEND API LOGIC UNCHANGED)
            if (paymentForm) {
                paymentForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    formView.style.display = 'none';
                    waitingView.style.display = 'block';

                    setTimeout(async () => {
                        const phone = document.getElementById('phone').value;
                        try {
                            const response = await fetch('/pay', {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify({ phone: phone })
                            });
                            const result = await response.json();

                            if (!response.ok) throw new Error(result.message_body || 'Error');

                            const orderId = result.reference;
                            const checkStatus = setInterval(async () => {
                                try {
                                    const statusRes = await fetch(`/check-status?order_id=${orderId}`);
                                    const statusData = await statusRes.json();

                                    if (statusData.status === 'COMPLETED') {
                                        clearInterval(checkStatus);
                                        window.location.href = 'success.html';
                                    } else if (statusData.status === 'FAILED') {
                                        clearInterval(checkStatus);
                                        waitingView.style.display = 'none';
                                        formView.style.display = 'block';
                                        alert("Malipo yameshindikana. Tafadhali jaribu tena.");
                                    }
                                } catch (err) { console.error(err); }
                            }, 3000);
                        } catch (error) {
                            waitingView.style.display = 'none';
                            formView.style.display = 'block';
                            alert("Tatizo: " + error.message);
                        }
                    }, 1500);
                });
            }

            // Lazy Load (UNCHANGED)
            const lazyVideos = document.querySelectorAll('video[data-src]');
            const observer = new IntersectionObserver((entries, obs) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const v = entry.target;
                        v.src = v.dataset.src;
                        v.load();
                        obs.unobserve(v);
                    }
                });
            }, { rootMargin: '200px' });
            lazyVideos.forEach(v => observer.observe(v));
        });
    </script>
</body>

</html>